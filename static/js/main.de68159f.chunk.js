(this.webpackJsonpmyreads=this.webpackJsonpmyreads||[]).push([[0],{20:function(e,t,c){},21:function(e,t,c){},31:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),o=c(13),a=c.n(o),i=(c(20),c(5)),r=c(7),l=c(2),d=(c(21),"https://reactnd-books-api.udacity.com"),j=localStorage.token;j||(j=localStorage.token=Math.random().toString(36).substr(-8));var b={Accept:"application/json",Authorization:j},h=c(6),u=c(0),O=function(e){var t=e.book,c=e.updateShelves;return Object(u.jsx)("li",{children:Object(u.jsxs)("div",{className:"book",children:[Object(u.jsxs)("div",{className:"book-top",children:[Object(u.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:function(e){if(e.imageLinks)return"url(".concat(e.imageLinks.thumbnail,")")}(t)}}),Object(u.jsx)("div",{className:"book-shelf-changer",children:Object(u.jsxs)("select",{value:t.shelf||"none",onChange:function(e){var s=e.target.value;c(t,s)},children:[Object(u.jsx)("option",{value:"none",disabled:!0,children:"Move to..."}),Object(u.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(u.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(u.jsx)("option",{value:"read",children:"Read"}),Object(u.jsx)("option",{value:"none",children:"None"})]})})]}),Object(u.jsx)("div",{className:"book-title",children:t.title}),Object(u.jsx)("div",{className:"book-authors",children:t.authors})]})})},f=function(e){var t=e.books,c=e.updateShelves,s=t.reduce((function(e,t){return e[t.shelf].push(t),e}),{wantToRead:[],currentlyReading:[],read:[]});return Object(u.jsxs)("div",{className:"list-books",children:[Object(u.jsx)("div",{className:"list-books-title",children:Object(u.jsx)("h1",{children:"MyReads"})}),Object(u.jsx)("div",{className:"list-books-content",children:Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h2",{className:"bookshelf-title",children:"Currently Reading"}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:s.currentlyReading.map((function(e){return Object(u.jsx)(O,{book:e,updateShelves:c},e.id)}))})})]}),Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h2",{className:"bookshelf-title",children:"Want to Read"}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:s.wantToRead.map((function(e){return Object(u.jsx)(O,{book:e,updateShelves:c},e.id)}))})})]}),Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h2",{className:"bookshelf-title",children:"Read"}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:s.read.map((function(e){return Object(u.jsx)(O,{book:e,updateShelves:c},e.id)}))})})]})]})}),Object(u.jsx)("div",{className:"open-search",children:Object(u.jsx)(h.b,{className:"open-search",to:"/search",children:"Add a book"})})]})},v=c.p+"static/media/find.ff8aa13f.svg";var m=function(e){var t=e.booksOnShelf,c=e.updateShelves,n=Object(s.useState)([]),o=Object(r.a)(n,2),a=o[0],l=o[1],j=Object(s.useState)(""),f=Object(r.a)(j,2),m=f[0],x=f[1],p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,c=Object(s.useState)(e),n=Object(r.a)(c,2),o=n[0],a=n[1];return Object(s.useEffect)((function(){var c=setTimeout((function(){a(e)}),t);return function(){clearTimeout(c)}}),[e,t]),o}(m);return Object(s.useEffect)((function(){p?function(e){return fetch("".concat(d,"/search"),{method:"POST",headers:Object(i.a)(Object(i.a)({},b),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(p).then((function(e){if(e.error)l([]);else{var c=e.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{shelf:t[e.id]})}));l(c)}})):l([])}),[p,t]),Object(u.jsxs)("div",{className:"search-books",children:[Object(u.jsxs)("div",{className:"search-books-bar",children:[Object(u.jsx)(h.b,{className:"close-search",to:"/",children:"Close"}),Object(u.jsx)("div",{className:"search-books-input-wrapper",children:Object(u.jsx)("input",{type:"text",placeholder:"Search by title or author",value:m,onChange:function(e){x(e.target.value.trim())}})})]}),Object(u.jsx)("div",{className:"search-books-results",children:Object(u.jsx)("ol",{className:"books-grid",children:a.length>0?a.map((function(e){return Object(u.jsx)(O,{book:e,updateShelves:c},e.id)})):Object(u.jsxs)("li",{className:"books-empty",children:[Object(u.jsx)("img",{src:v,alt:"no result"}),Object(u.jsx)("p",{children:"no result"})]})})})]})};var x=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1];Object(s.useEffect)((function(){fetch("".concat(d,"/books"),{headers:b}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){return n(e)}))}),[]);var o=function(e,t){(function(e,t){return fetch("".concat(d,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)(Object(i.a)({},b),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))})(e,t).then((function(s){n(c.map((function(c){return c.id===e.id?Object(i.a)(Object(i.a)({},c),{},{shelf:t}):c})))}))},a=c.reduce((function(e,t){return e[t.id]=t.shelf,e}),{});return Object(u.jsxs)("div",{className:"app",children:[Object(u.jsx)(l.a,{exact:!0,path:"/",children:Object(u.jsx)(f,{books:c,updateShelves:o})}),Object(u.jsx)(l.a,{path:"/search",children:Object(u.jsx)(m,{booksOnShelf:a,updateShelves:o})})]})},p=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,32)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,o=t.getLCP,a=t.getTTFB;c(e),s(e),n(e),o(e),a(e)}))};a.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(h.a,{basename:"/myreads",children:Object(u.jsx)(x,{})})}),document.getElementById("root")),p()}},[[31,1,2]]]);
//# sourceMappingURL=main.de68159f.chunk.js.map