{"version":3,"sources":["BooksAPI.ts","Book.tsx","Library.tsx","icons/find.svg","SearchBooks.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["api","token","localStorage","Math","random","toString","substr","headers","Book","book","updateShelves","className","style","width","height","backgroundImage","imageLinks","thumbnail","value","shelf","onChange","event","target","disabled","title","authors","Library","books","booksByShelf","reduce","acc","obj","push","wantToRead","currentlyReading","read","map","id","to","SearchBooks","booksOnShelf","useState","setBooks","query","setQuery","debouncedSearchTerm","delay","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useDebounce","fetch","method","body","JSON","stringify","then","res","json","data","booksAPI","error","shelvedBooks","type","placeholder","trim","length","src","find","alt","App","shelves","b","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.fb091c8f.chunk.js","sourcesContent":["\nconst api = \"https://reactnd-books-api.udacity.com\"\n\n\n// Generate a unique token for storing your bookshelf data on the backend server.\nlet token = localStorage.token\nif (!token)\n  token = localStorage.token = Math.random().toString(36).substr(-8)\n\nconst headers = {\n  'Accept': 'application/json',\n  'Authorization': token\n}\n\nexport const get = (bookId: string) =>\n  fetch(`${api}/books/${bookId}`, { headers })\n    .then(res => res.json())\n    .then(data => data.book)\n\nexport const getAll = (): Promise<book[]> =>\n  fetch(`${api}/books`, { headers })\n    .then(res => res.json())\n    .then(data => data.books)\n\nexport const update = (book: book, shelf: shelf) =>\n  fetch(`${api}/books/${book.id}`, {\n    method: 'PUT',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ shelf })\n  }).then(res => res.json())\n\nexport const search = (query: string): Promise<Omit<book, shelf>[] & { error: string }> =>\n  fetch(`${api}/search`, {\n    method: 'POST',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ query })\n  }).then(res => res.json())\n    .then(data => data.books)\n","import React from 'react';\n\nconst Book: React.FC<{ book: book, updateShelves: (book: book, shelf: shelf) => void }> = ({ book, updateShelves }) => {\n\n    const handleShelving = (event: React.ChangeEvent<HTMLSelectElement>) => {\n        const shelf = event.target.value as shelf;\n        updateShelves(book, shelf);\n    }\n\n    return (\n        <li>\n            <div className=\"book\">\n                <div className=\"book-top\">\n                    <div className=\"book-cover\" style={{\n                        width: 128, height: 193, backgroundImage: ((book) => {\n                            if (book.imageLinks) {\n                                return (`url(${book.imageLinks.thumbnail})`)\n                            }\n                        })(book)\n                    }}></div>\n                    <div className=\"book-shelf-changer\">\n                        <select value={book.shelf || 'none'} onChange={handleShelving}>\n                            <option value=\"none\" disabled>Move to...</option>\n                            <option value=\"currentlyReading\">Currently Reading</option>\n                            <option value=\"wantToRead\">Want to Read</option>\n                            <option value=\"read\">Read</option>\n                            <option value=\"none\">None</option>\n                        </select>\n                    </div>\n                </div>\n                <div className=\"book-title\">{book.title}</div>\n                <div className=\"book-authors\">{book.authors}</div>\n            </div>\n        </li>)\n}\n\nexport default Book;","import React from 'react';\nimport { Link } from 'react-router-dom'\nimport Book from './Book'\n\nconst Library: React.FC<{ books: book[], updateShelves: (book: book, shelf: shelf) => void }> = ({ books, updateShelves }) => {\n    const booksByShelf = books.reduce<{ [key in shelf]: book[] }>(function (acc, obj) {\n        let key = obj.shelf\n        acc[key].push(obj)\n        return acc\n    }, { wantToRead: [], currentlyReading: [], read: [], })\n    \n    return (\n        <div className=\"list-books\">\n            <div className=\"list-books-title\">\n                <h1>MyReads</h1>\n            </div>\n            <div className=\"list-books-content\">\n                <div>\n                    <div className=\"bookshelf\">\n                        <h2 className=\"bookshelf-title\">Currently Reading</h2>\n                        <div className=\"bookshelf-books\">\n                            <ol className=\"books-grid\">{booksByShelf.currentlyReading.map(book => <Book key={book.id} book={book} updateShelves={updateShelves} />)}</ol>\n                        </div>\n                    </div>\n                    <div className=\"bookshelf\">\n                        <h2 className=\"bookshelf-title\">Want to Read</h2>\n                        <div className=\"bookshelf-books\">\n                            <ol className=\"books-grid\">{booksByShelf.wantToRead.map(book => <Book key={book.id} book={book} updateShelves={updateShelves} />)}</ol>\n                        </div>\n                    </div>\n                    <div className=\"bookshelf\">\n                        <h2 className=\"bookshelf-title\">Read</h2>\n                        <div className=\"bookshelf-books\">\n                            <ol className=\"books-grid\">{booksByShelf.read.map(book => <Book key={book.id} book={book} updateShelves={updateShelves} />)}</ol>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"open-search\">\n                <Link className=\"open-search\" to='/search'>Add a book</Link>\n            </div>\n        </div>)\n}\n\nexport default Library;","export default __webpack_public_path__ + \"static/media/find.ff8aa13f.svg\";","import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom'\nimport * as booksAPI from './BooksAPI'\nimport Book from './Book'\nimport find from './icons/find.svg';\n\nconst SearchBooks: React.FC<{ booksOnShelf: { [key: string]: shelf }, updateShelves: (book: book, shelf: shelf) => void }> = ({ booksOnShelf, updateShelves }) => {\n  const [books, setBooks] = useState<book[]>([]);\n  const [query, setQuery] = useState(\"\");\n\n  const debouncedSearchTerm = useDebounce(query);\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setQuery(event.target.value.trim());\n  }\n\n  // Effect for API call\n  useEffect(\n    () => {\n      if (debouncedSearchTerm) {\n        booksAPI.search(debouncedSearchTerm).then((books) => {\n          if (!books.error) {\n            const shelvedBooks = books.map(book => ({ ...book, shelf: booksOnShelf[book.id] }))\n            setBooks(shelvedBooks);\n          }\n        })\n      } else { setBooks([]) }\n    },\n    [debouncedSearchTerm, booksOnShelf] // Only call effect if debounced search term changes\n  );\n\n  return (\n    <div className=\"search-books\">\n      <div className=\"search-books-bar\">\n        <Link className=\"close-search\" to='/'>Close</Link>\n        <div className=\"search-books-input-wrapper\">\n          <input type=\"text\" placeholder=\"Search by title or author\" value={query} onChange={handleChange} />\n        </div>\n      </div>\n      <div className=\"search-books-results\">\n        <ol className=\"books-grid\">\n          { books.length > 0 ? books.map(book => <Book key={book.id} book={book} updateShelves={updateShelves} />) :\n          <li className=\"books-empty\"><img src={find} alt=\"no result\" /><p>no result</p></li>}\n        </ol>\n      </div>\n    </div>\n  )\n}\n\nfunction useDebounce(value: any, delay = 300) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n  return debouncedValue;\n}\n\nexport default SearchBooks\n","// import React from 'react'\n// import { Route } from 'react-router-dom'\n// import * as booksAPI from './BooksAPI'\n// import './App.css'\n// import SearchBooks from './SearchBooks';\n// import Library from './Library';\n\n// class BooksApp extends React.Component {\n//   state = {\n//     books: []\n//   }\n\n//   componentDidMount() {\n//     booksAPI.getAll().then((books) => {\n//       this.setState({ books })\n//     })\n//   }\n\n//   updateShelves = (book, shelf) => {\n//     // remove book\n//     this.setState((state) => ({\n//       books: state.books.filter((b) => b.id !== book.id)\n//     }))\n\n//     // update server\n//     booksAPI.update(book, shelf).then((shelves) => {\n//       // console.log(shelves)\n//       // console.log(this.state.books)\n\n//       // get book\n//       booksAPI.get(book.id).then(book =>\n//         this.setState(state => ({\n//           books: state.books.concat([book])\n//         }))\n//       )\n//     })\n//   }\n//   render() {\n//     return (\n//     )\n//   }\n// }\n\n// export default BooksApp\n\n\nimport React, { useEffect, useState } from 'react';\nimport { Route } from 'react-router-dom';\nimport './App.css';\nimport * as booksAPI from './BooksAPI'\nimport Library from './Library';\nimport SearchBooks from './SearchBooks';\n\nfunction App() {\n  const [books, setBooks] = useState<book[]>([]);\n\n  useEffect(() => {\n    booksAPI.getAll().then(books => setBooks(books))\n  }, []);\n\n  const updateShelves = (book: book, shelf: shelf) => {\n    booksAPI.update(book, shelf).then((shelves) => {\n      setBooks(books.map(b => b.id === book.id ? { ...b, shelf } : b))\n    })\n  }\n\n  const booksOnShelf = books.reduce<{ [key: string]: shelf }>((acc, obj) => { acc[obj.id] = obj.shelf; return acc }, {})\n\n  return (\n    <div className=\"app\" >\n      <Route exact path='/'>\n        <Library books={books} updateShelves={updateShelves} />\n      </Route>\n      <Route path='/search'>\n        <SearchBooks booksOnShelf={booksOnShelf} updateShelves={updateShelves} />\n      </Route>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { BrowserRouter } from 'react-router-dom'\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter basename=\"/myreads\"><App /></BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}